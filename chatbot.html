let currentScenario = "";

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Chatbot â€“ WaveBank</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f4f6f8;
}

.chat-container {
    max-width: 420px;
    margin: 40px auto;
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    height: 600px;
}

.chat-header {
    padding: 20px;
    background: #111;
    color: white;
    border-radius: 20px 20px 0 0;
    text-align: center;
}

.chat-messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}

.msg {
    margin: 10px 0;
    padding: 12px 15px;
    border-radius: 15px;
    max-width: 80%;
    font-size: 14px;
}

.bot {
    background: #eee;
}

.user {
    background: #111;
    color: white;
    margin-left: auto;
}

.buttons {
    margin-top: 10px;
}

.buttons button {
    margin: 5px 5px 0 0;
    padding: 8px 14px;
    border-radius: 20px;
    border: none;
    background: #111;
    color: white;
    cursor: pointer;
    font-size: 13px;
}

.footer {
    padding: 10px;
    text-align: center;
    font-size: 12px;
    color: #777;
}
</style>
</head>

<body>

<div class="chat-container">
    <div class="chat-header">
        ðŸ¤– Assistant WaveBank
    </div>

    <div class="chat-messages" id="messages"></div>

    <div class="footer">
        Projet dâ€™Ã©tude IA â€“ Mme InÃ¨s BENHASSEN
    </div>
</div>

<script>
const messages = document.getElementById("messages");
const clientName = localStorage.getItem("clientName") || "Client";

function botMessage(text) {
    const div = document.createElement("div");
    div.className = "msg bot";
    div.innerHTML = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}

function userMessage(text) {
    const div = document.createElement("div");
    div.className = "msg user";
    div.innerText = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}

function options(buttons) {
    const div = document.createElement("div");
    div.className = "buttons";
    buttons.forEach(b => {
        const btn = document.createElement("button");
        btn.innerText = b.text;
        btn.onclick = b.action;
        div.appendChild(btn);
    });
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}

// SCÃ‰NARIO INITIAL
setTimeout(() => {
    botMessage("Bonjour <b>" + clientName + "</b> ðŸ‘‹<br>Que souhaitez-vous faire ?");
    options([
        { text: "ðŸ’¸ Retrait", action: retrait },
        { text: "ðŸ” Virement", action: virement },
        { text: "ðŸ’³ Carte bloquÃ©e", action: carte },
        { text: "ðŸ“ž Conseiller", action: conseiller }
    ]);
}, 500);

// SCÃ‰NARIOS
function retrait() {
    userMessage("Retrait");
    botMessage("Avez-vous un problÃ¨me de retrait ?");
}

function virement() {
    currentScenario = "virement";
    userMessage("Virement");
    botMessage("Sâ€™agit-il dâ€™un virement non effectuÃ© ?");
    options([
        { text: "âœ… Oui", action: virementOui },
        { text: "âŒ Non", action: virementNon }
    ]);
}
function virementOui() {
    userMessage("Oui");
    botMessage("Depuis combien de temps le virement est-il en attente ?");
    options([
        { text: "â± Moins de 24h", action: () => {
            userMessage("Moins de 24h");
            botMessage("Veuillez patienter jusquâ€™Ã  24h. Le virement est en cours de traitement.");
        }},
        { text: "âŒ› Plus de 24h", action: () => {
            userMessage("Plus de 24h");
            botMessage("Merci. Un dossier est ouvert. Un conseiller va vous contacter.");
        }}
    ]);
}

function virementNon() {
    userMessage("Non");
    botMessage("Merci pour votre confirmation. Puis-je vous rappeler dâ€™autres services ?");
}

}

function carte() {
    userMessage("Carte bloquÃ©e");
    botMessage("Votre carte est-elle actuellement bloquÃ©e ?");
}

function conseiller() {
    userMessage("Parler Ã  un conseiller");
    botMessage("Merci. Un conseiller va vous contacter sous peu.");
}
</script>

</body>
</html>

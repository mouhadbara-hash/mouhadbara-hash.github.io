<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>WaveBank â€” Assistant Bancaire</title>

<style>
/* ====== FOND ENTREPRISE ====== */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background:
    linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.55)),
    url("https://images.unsplash.com/photo-1560472354-b33ff0c44a43");
  background-size: cover;
  background-position: center;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ====== CARTE CHAT ====== */
.chat-app {
  width: 420px;
  height: 640px;
  background: #fff;
  border-radius: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.header {
  background: #0f0f0f;
  color: #fff;
  padding: 18px;
  text-align: center;
  font-weight: bold;
}

.messages {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
  background: #f5f7fa;
}

.msg {
  max-width: 80%;
  margin: 8px 0;
  padding: 12px 14px;
  border-radius: 16px;
  font-size: 14px;
}

.bot { background: #e9ecef; }
.user { background: #0f0f0f; color: #fff; margin-left: auto; }

.buttons {
  margin-top: 8px;
}
.buttons button {
  margin: 6px 6px 0 0;
  padding: 10px 14px;
  border-radius: 18px;
  border: none;
  background: #0f0f0f;
  color: #fff;
  cursor: pointer;
  font-size: 13px;
}

.footer {
  text-align: center;
  padding: 8px;
  font-size: 11px;
  color: #777;
  background: #fff;
}
</style>
</head>

<body>

<div class="chat-app">
  <div class="header">ðŸ¤– Assistant WaveBank</div>
  <div id="messages" class="messages"></div>
  <div class="footer">Projet dâ€™Ã©tude IA â€” Mme InÃ¨s BENHASSEN</div>
</div>

<script>
/* ====== OUTILS ====== */
const messages = document.getElementById("messages");
const clientName = localStorage.getItem("clientName") || "Client";
let scenario = "";
  // --- DonnÃ©es client (simulation bancaire) ---
const clientDays = 128;       // jours comme client
const clientWithdrawals = 23; // nombre de retraits
const clientTransfers = 41;   // nombre de virements


function bot(text) {
  const d = document.createElement("div");
  d.className = "msg bot";
  d.innerHTML = text;
  messages.appendChild(d);
  messages.scrollTop = messages.scrollHeight;
}

function user(text) {
  const d = document.createElement("div");
  d.className = "msg user";
  d.innerText = text;
  messages.appendChild(d);
  messages.scrollTop = messages.scrollHeight;
}

function options(list) {
  const d = document.createElement("div");
  d.className = "buttons";
  list.forEach(o => {
    const b = document.createElement("button");
    b.innerText = o.text;
    b.onclick = o.action;
    d.appendChild(b);
  });
  messages.appendChild(d);
  messages.scrollTop = messages.scrollHeight;
}

function backMenu() {
  bot("Que souhaitez-vous faire ?");
  options([
    { text: "ðŸ’¸ Retrait", action: retrait },
    { text: "ðŸ” Virement", action: virement },
    { text: "ðŸ’³ Carte bloquÃ©e", action: carte },
    { text: "ðŸ“ž Conseiller", action: conseiller }
  ]);
}

/* ====== ACCUEIL ====== */
setTimeout(() => {
  bot(`
Bonjour <b>${clientName}</b> ðŸ‘‹<br><br>
ðŸ“Š <b>Votre statut bancaire :</b><br>
â€¢ Client depuis <b>${clientDays} jours</b><br>
â€¢ <b>${clientWithdrawals}</b> retraits effectuÃ©s<br>
â€¢ <b>${clientTransfers}</b> virements rÃ©alisÃ©s<br><br>
Que souhaitez-vous faire ?
`);
backMenu();

}, 500);

/* ====== SCÃ‰NARIOS ====== */

/* --- RETRAIT --- */
function retrait() {
  scenario = "retrait";
  user("Retrait");
  bot("Quel type de problÃ¨me de retrait rencontrez-vous ?");
  options([
    { text: "ðŸ§ Distributeur indisponible", action: retraitATM },
    { text: "ðŸ’° Argent non reÃ§u", action: retraitArgent },
    { text: "âŒ Annuler", action: backMenu }
  ]);
}

function retraitATM() {
  user("Distributeur indisponible");
  bot("Nous vous conseillons dâ€™utiliser un autre distributeur ou de rÃ©essayer plus tard.");
  options([
    { text: "ðŸ“ž Contacter un conseiller", action: conseiller },
    { text: "ðŸ”™ Menu", action: backMenu }
  ]);
}

function retraitArgent() {
  user("Argent non reÃ§u");
  bot("Le montant a-t-il Ã©tÃ© dÃ©bitÃ© de votre compte ?");
  options([
    { text: "Oui", action: () => {
        user("Oui");
        bot("Un dossier est ouvert. Le montant sera recrÃ©ditÃ© sous 72h.");
        options([{ text: "ðŸ”™ Menu", action: backMenu }]);
      }},
    { text: "Non", action: () => {
        user("Non");
        bot("Aucune action nâ€™est nÃ©cessaire. Merci de vÃ©rifier votre historique.");
        options([{ text: "ðŸ”™ Menu", action: backMenu }]);
      }}
  ]);
}


/* --- VIREMENT --- */
function virement() {
  scenario = "virement";
  user("Virement");
  bot("Sâ€™agit-il dâ€™un virement non effectuÃ© ?");
  options([
    { text: "Oui", action: virementOui },
    { text: "Non", action: backMenu }
  ]);
}
function virementOui() {
  user("Oui");
  bot("Depuis combien de temps le virement est-il en attente ?");
  options([
    { text: "â± Moins de 24h", action: () => {
        user("Moins de 24h");
        bot("Le virement est en cours de traitement. Merci de patienter.");
        options([{ text: "ðŸ”™ Menu", action: backMenu }]);
      }},
    { text: "âŒ› Plus de 24h", action: () => {
        user("Plus de 24h");
        bot("Un dossier est ouvert. Un conseiller va vous contacter.");
        options([{ text: "ðŸ“ž Conseiller", action: conseiller }]);
      }}
  ]);
}

/* --- CARTE BLOQUÃ‰E --- */
function carte() {
  scenario = "carte";
  user("Carte bloquÃ©e");
  bot("Quelle est la raison du blocage ?");
  options([
    { text: "ðŸ” Code PIN erronÃ©", action: cartePin },
    { text: "ðŸŒ Paiement refusÃ© Ã  lâ€™Ã©tranger", action: carteEtranger },
    { text: "âŒ Annuler", action: backMenu }
  ]);
}

function cartePin() {
  user("Code PIN erronÃ©");
  bot("Votre carte est temporairement bloquÃ©e pour sÃ©curitÃ©.");
  options([
    { text: "ðŸ“ž DÃ©bloquer avec un conseiller", action: conseiller },
    { text: "ðŸ”™ Menu", action: backMenu }
  ]);
}

function carteEtranger() {
  user("Paiement refusÃ© Ã  lâ€™Ã©tranger");
  bot("Souhaitez-vous activer les paiements internationaux ?");
  options([
    { text: "Oui", action: () => {
        user("Oui");
        bot("Paiements internationaux activÃ©s. RÃ©essayez votre paiement.");
        options([{ text: "ðŸ”™ Menu", action: backMenu }]);
      }},
    { text: "Non", action: backMenu }
  ]);
}

/* --- CONSEILLER --- */
function conseiller() {
  user("Parler Ã  un conseiller");
  bot("Merci. Un conseiller WaveBank vous contactera dans les plus brefs dÃ©lais.");
  options([{ text: "ðŸ”™ Menu", action: backMenu }]);
}
</script>

</body>
</html>

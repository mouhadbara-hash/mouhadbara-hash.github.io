<script>
<script>
const messages = document.getElementById("messages");
const clientName = localStorage.getItem("clientName") || "Client";

function bot(text){
  messages.innerHTML += `<div class="msg bot">${text}</div>`;
  messages.scrollTop = messages.scrollHeight;
}

function user(text){
  messages.innerHTML += `<div class="msg user">${text}</div>`;
  messages.scrollTop = messages.scrollHeight;
}

bot(`Bonjour <b>${clientName}</b> üëã<br>
Je suis une intelligence artificielle bancaire.<br>
Posez-moi vos questions sur les virements, retraits, cartes ou votre compte.`);

function send(){
  const input = document.getElementById("userInput");
  const text = input.value.trim();
  if(!text) return;

  user(text);
  input.value = "";

  setTimeout(() => analyze(text.toLowerCase()), 600);
}

function analyze(text){

  const intents = {
    virement: ["virement","envoyer","transfer","re√ßu","reception","bloqu√©","√©chou√©"],
    retrait: ["retrait","retirer","argent","atm","distributeur"],
    carte: ["carte","bloqu√©e","cb","visa","mastercard"],
    solde: ["solde","argent","compte"],
    conseiller: ["conseiller","agent","humain"],
    ia: ["ia","intelligence","robot"]
  };

  function has(intent){
    return intents[intent].some(word => text.includes(word));
  }

  if(has("virement")){
    bot("Analyse IA effectu√©e.<br>Un virement peut √©chouer pour des raisons de s√©curit√©, d‚Äôinformations incorrectes ou de d√©lais interbancaires.<br><b>Un humain peut v√©rifier votre dossier.</b>");
    return;
  }

  if(has("retrait")){
    bot("Un refus de retrait est g√©n√©ralement li√© √† un plafond, un solde insuffisant ou une restriction temporaire.<br>Une v√©rification humaine est recommand√©e.");
    return;
  }

  if(has("carte")){
    bot("Pour des raisons de s√©curit√© bancaire, une IA ne peut pas d√©bloquer une carte.<br><b>Un conseiller humain est obligatoire.</b>");
    return;
  }

  if(has("solde")){
    bot("Pour des raisons de confidentialit√©, une IA ne peut pas afficher le solde r√©el.<br>Veuillez consulter votre espace client s√©curis√©.");
    return;
  }

  if(has("conseiller")){
    bot("Un conseiller humain est disponible de 08h √† 18h les jours ouvr√©s.");
    return;
  }

  if(has("ia")){
    bot("Je suis une IA d‚Äôassistance bancaire.<br>Je vous aide √† comprendre, mais les d√©cisions finales sont humaines.");
    return;
  }

  bot("Je n‚Äôai pas compris pr√©cis√©ment votre demande.<br>Pouvez-vous reformuler votre question bancaire ?");
}
</script>

</script>

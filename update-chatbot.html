<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>WaveBank ‚Äî Assistant Bancaire</title>

<style>
/* ====== FOND ENTREPRISE ====== */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background:
    linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.55)),
    url("https://images.unsplash.com/photo-1560472354-b33ff0c44a43");
  background-size: cover;
  background-position: center;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ====== CARTE CHAT ====== */
.chat-app {
  width: 420px;
  height: 640px;
  background: #fff;
  border-radius: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.header {
  background: #0f0f0f;
  color: #fff;
  padding: 18px;
  text-align: center;
  font-weight: bold;
}

.messages {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
  background: #f5f7fa;
}

.msg {
  max-width: 80%;
  margin: 8px 0;
  padding: 12px 14px;
  border-radius: 16px;
  font-size: 14px;
  animation: fadeIn 0.25s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}


.bot { background: #e9ecef; }
.user { background: #0f0f0f; color: #fff; margin-left: auto; }

.buttons {
  margin-top: 8px;
}
.buttons button {
  margin: 6px 6px 0 0;
  padding: 10px 14px;
  border-radius: 18px;
  border: none;
  background: #0f0f0f;
  color: #fff;
  cursor: pointer;
  font-size: 13px;
}

.footer {
  text-align: center;
  padding: 8px;
  font-size: 11px;
  color: #777;
  background: #fff;
}
</style>
</head>

<body>

<div class="chat-app">
  <div class="header">ü§ñ Assistant WaveBank</div>
  <div id="messages" class="messages"></div>
  <div class="footer">Projet d‚Äô√©tude IA ‚Äî Mme In√®s BENHASSEN</div>
</div>
<script>
/* ====== DONN√âES CLIENT ====== */
const messages = document.getElementById("messages");
const clientName = localStorage.getItem("clientName") || "Client";
let scenario = "";

const clientDays = 128;
const clientWithdrawals = 23;
const clientTransfers = 41;

/* ====== ANIMATION "LE BOT √âCRIT" ====== */
function typing(callback) {
  const t = document.createElement("div");
  t.className = "msg bot";
  t.innerText = "‚úçÔ∏è L‚Äôassistant √©crit...";
  messages.appendChild(t);
  messages.scrollTop = messages.scrollHeight;

  setTimeout(() => {
    messages.removeChild(t);
    callback();
  }, 700);
}

/* ====== OUTILS ====== */
function bot(text) {
  const d = document.createElement("div");
  d.className = "msg bot";
  d.innerHTML = text;
  messages.appendChild(d);
  messages.scrollTop = messages.scrollHeight;
}

function user(text) {
  const d = document.createElement("div");
  d.className = "msg user";
  d.innerText = text;
  messages.appendChild(d);
  messages.scrollTop = messages.scrollHeight;
}

function options(list) {
  const d = document.createElement("div");
  d.className = "buttons";
  list.forEach(o => {
    const b = document.createElement("button");
    b.innerText = o.text;
    b.onclick = o.action;
    d.appendChild(b);
  });
  messages.appendChild(d);
  messages.scrollTop = messages.scrollHeight;
}

/* ====== MENU PRINCIPAL ====== */
function backMenu() {
  bot("Que souhaitez-vous faire ?");
  options([
    { text: "üí∏ Retrait", action: retrait },
    { text: "üîÅ Virement", action: virement },
    { text: "üí≥ Carte bloqu√©e", action: carte },
    { text: "üìû Conseiller", action: conseiller },
    { text: "‚úÖ Fin de la discussion", action: finDiscussion }
  ]);
}

/* ====== ACCUEIL ====== */
setTimeout(() => {
  typing(() => {
    bot(`
Bonjour <b>${clientName}</b> üëã<br><br>
üìä <b>Votre statut bancaire :</b><br>
‚Ä¢ Client depuis <b>${clientDays} jours</b><br>
‚Ä¢ <b>${clientWithdrawals}</b> retraits<br>
‚Ä¢ <b>${clientTransfers}</b> virements<br><br>
`);
    backMenu();
  });
}, 500);

/* ====== SC√âNARIOS ====== */

function retrait() {
  user("Retrait");
  bot("Quel type de probl√®me de retrait ?");
  options([
    { text: "üèß Distributeur indisponible", action: () => {
        user("Distributeur indisponible");
        bot("Merci de r√©essayer plus tard ou utiliser un autre ATM.");
        options([{ text: "üîô Menu", action: backMenu }]);
      }},
    { text: "üí∞ Argent non re√ßu", action: () => {
        user("Argent non re√ßu");
        bot("Un dossier est ouvert. Recr√©dit sous 72h.");
        options([{ text: "üîô Menu", action: backMenu }]);
      }},
    { text: "‚ùå Annuler", action: backMenu }
  ]);
}

function virement() {
  user("Virement");
  bot("S‚Äôagit-il d‚Äôun virement non effectu√© ?");
  options([
    { text: "Oui", action: () => {
        user("Oui");
        bot("D√©lai estim√© : 24 √† 72h ouvr√©es.");
        options([{ text: "üìû Conseiller", action: conseiller },
                 { text: "üîô Menu", action: backMenu }]);
      }},
    { text: "Non", action: backMenu }
  ]);
}

function carte() {
  user("Carte bloqu√©e");
  bot("Souhaitez-vous d√©bloquer votre carte ?");
  options([
    { text: "Oui", action: () => {
        user("Oui");
        bot("V√©rification d‚Äôidentit√© requise.");
        options([{ text: "üìû Conseiller", action: conseiller }]);
      }},
    { text: "Non", action: backMenu }
  ]);
}

function conseiller() {
  user("Conseiller");
  bot("Un conseiller WaveBank vous contactera sous peu.");
  options([{ text: "üîô Menu", action: backMenu }]);
}

/* ====== FIN DE DISCUSSION ====== */
function finDiscussion() {
  user("Fin de la discussion");
  typing(() => {
    bot(`
üôè <b>Merci de faire confiance √† WaveBank</b><br><br>
<b>R√©capitulatif :</b><br>
‚Ä¢ Client : ${clientName}<br>
‚Ä¢ Anciennet√© : ${clientDays} jours<br>
‚Ä¢ Retraits : ${clientWithdrawals}<br>
‚Ä¢ Virements : ${clientTransfers}<br><br>
√Ä tr√®s bient√¥t.
`);
    options([{ text: "üîÑ Nouvelle demande", action: backMenu }]);
  });
}
</script>


</body>
</html>
